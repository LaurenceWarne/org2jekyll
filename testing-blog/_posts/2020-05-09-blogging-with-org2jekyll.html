---
date: 2020-05-09 12:34
author: drjekyll&mrtony
layout: post
title: Blogging with org2jekyll setup
excerpt: A post demo to blog with org2jekyll
tags: 
- blog
- org2jekyll
- setup
- jekyll
categories: 
- blog
- org2jekyll
- setup
- jekyll
permalink: /blogging-with-org2jekyll-setup
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org147e595">1. Enter environment</a></li>
<li><a href="#org1ce2d6f">2. Setup your emacs</a>
<ul>
<li><a href="#org0d2bf65">2.1. Install org2jekyll</a></li>
<li><a href="#orga36e4c2">2.2. Setup org2jekyll</a></li>
</ul>
</li>
<li><a href="#orga0405a6">3. Create a blog post</a></li>
<li><a href="#orgf5ed380">4. Create a static page</a></li>
<li><a href="#org8503f56">5. Evaluate block code the org-mode way</a></li>
<li><a href="#org7e2ee1c">6. Display image</a></li>
</ul>
</div>
</div>
<p>
In this post, we will show how to setup org2jekyll and play with a local jekyll
instance.
</p>

<p>
For this, we will be using a mix of nix tools (e.g. <a href="https://nixos.wiki/wiki/Development_environment_with_nix-shell">nix-shell</a>) and standard
Makefile. The end-goal being reproducibility.
</p>

<p>
Do not only trust what you read, try and reproduce it yourself following this.
</p>

<div id="outline-container-org147e595" class="outline-2">
<h2 id="org147e595"><span class="section-number-2">1</span> Enter environment</h2>
<div class="outline-text-2" id="text-1">
<p>
To make your environment with jekyll aware system:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ nix-shell
</pre>
</div>

<p>
This will install the necessary tools for a jekyll to run locally. You need nix
to be installed though <b>¯\<sub>(ツ)</sub>_/¯</b>. The dependency cycle must start somewhere
heh.
</p>

<p>
Then, to run the instance:
</p>

<div class="org-src-container">
<pre class="src src-shell">$ make update run-dev
</pre>
</div>

<p>
Note: `update` is needed the first time around to install the necessary
dependencies.
</p>

<p>
Open your browser and head over <a href="http://localhost:4000">your running instance</a>.
</p>

<p>
Everything should be fine and you should see a basic jekyll instance running
</p>
</div>
</div>

<div id="outline-container-org1ce2d6f" class="outline-2">
<h2 id="org1ce2d6f"><span class="section-number-2">2</span> Setup your emacs</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org0d2bf65" class="outline-3">
<h3 id="org0d2bf65"><span class="section-number-3">2.1</span> Install org2jekyll</h3>
<div class="outline-text-3" id="text-2-1">
<p>
If you do not have installed org2jekyll yet, it's fine, you can always
temporarily activate it through emacs' buffer loading mechanism.
</p>

<p>
Open <a href="https://github.com/ardumont/org2jekyll/blob/master/org2jekyll.el">org2jekyll.el</a> with emacs, load it (<b><b>M-x eval-buffer</b></b>).
</p>
</div>
</div>

<div id="outline-container-orga36e4c2" class="outline-3">
<h3 id="orga36e4c2"><span class="section-number-3">2.2</span> Setup org2jekyll</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Open <a href="https://github.com/ardumont/org2jekyll/blob/master/testing-blog/testing-blog-config.el">testing-blog-config.el</a> with emacs, load it (<b><b>M-x eval-buffer</b></b>).
</p>

<p>
Note that this file should really be somewhere in your personal emacs
configuration stanza. It's declared here so it's publicly available ;)
</p>

<p>
You should now be able to play with org2jekyll. And then check the result in
the jekyll instance.
</p>
</div>
</div>
</div>

<div id="outline-container-orga0405a6" class="outline-2">
<h2 id="orga0405a6"><span class="section-number-2">3</span> Create a blog post</h2>
<div class="outline-text-2" id="text-3">
<p>
<b><b>M-x org2jekyll-create-draft</b></b> and follow the minibuffer questions. Choose the
layout "post" (in the current configuration).
</p>

<p>
Write some awesome stuff as you see fit, the org way.
</p>

<p>
When done, publish: <b><b>M-x org2jekyll-publish</b></b>.
</p>

<p>
From your browser, refresh your <a href="http://localhost:4000">your running instance</a>.
You should now see your blog post published there.
</p>

<p>
You can loop over edition in org and publish until you are satisfied.
</p>
</div>
</div>

<div id="outline-container-orgf5ed380" class="outline-2">
<h2 id="orgf5ed380"><span class="section-number-2">4</span> Create a static page</h2>
<div class="outline-text-2" id="text-4">
<p>
You can also edit static pages.
</p>

<p>
For example a page about you, call it <b>about-me.org</b>
</p>

<p>
<b><b>M-x org2jekyll-create-draft</b></b>, follow the minibuffer questions. Choose the
layout "default" (in the current configuration).
</p>

<p>
The write some things about yourself the org way.
</p>

<p>
Optionally, you can add <b><b>#+PERMALINK: &lt;whatever-you-want&gt;</b></b> header.
</p>

<p>
When done, <b><b>M-x org2jekyll-publish</b></b>.
</p>

<p>
From your browser, refresh your <a href="http://localhost:4000">your running instance</a>.
</p>

<p>
You should now see your about-me page there, not alongside the listed blog
posts though. In the title menu bar.
</p>

<p>
If you don't find, depending on some jekyll configuration, you can always head
over the <a href="http://localhost:4000/about-me">about-me page</a> (if you used the extra permalink mentioned).
</p>
</div>
</div>

<div id="outline-container-org8503f56" class="outline-2">
<h2 id="org8503f56"><span class="section-number-2">5</span> Evaluate block code the org-mode way</h2>
<div class="outline-text-2" id="text-5">
<p>
Make your emacs able to deal with <a href="https://gitlab.com/ardumont/home/-/blob/5afd58b89517dbe03a1510ce4fadb5200d80c5bb/emacs/default.nix#L140-142">python and matplotlib for the following</a>.
</p>

<p>
Evaluate the block (<b><b>C-c C-c</b></b>) to have the results below.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #4f97d7; font-weight: bold;">import</span> os
<span style="color: #4f97d7; font-weight: bold;">import</span> matplotlib
<span style="color: #4f97d7; font-weight: bold;">import</span> matplotlib.pyplot <span style="color: #4f97d7; font-weight: bold;">as</span> plt
<span style="color: #4f97d7; font-weight: bold;">import</span> numpy <span style="color: #4f97d7; font-weight: bold;">as</span> np

<span style="color: #7590db;">t</span> = np.arange(0.0, 2.0, 0.01)
<span style="color: #7590db;">s</span> = 1 + np.sin(2 * np.pi * t)

<span style="color: #7590db;">fig</span>, <span style="color: #7590db;">ax</span> = plt.subplots()
ax.plot(t, s)

ax.<span style="color: #4f97d7;">set</span>(xlabel=<span style="color: #2d9574;">'time (s)'</span>, ylabel=<span style="color: #2d9574;">'voltage (mV)'</span>, title=<span style="color: #2d9574;">'Voltage over time'</span>)
ax.grid()

os.makedirs(<span style="color: #2d9574;">"./img"</span>, exist_ok=<span style="color: #a45bad;">True</span>)
fig.savefig(<span style="color: #2d9574;">"./img/plot-sin.png"</span>)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Text</td>
<td class="org-left">(33.722222222222214 0.5 voltage (mV))</td>
<td class="org-left">Text</td>
<td class="org-left">(0.5 23.52222222222222 time (s))</td>
<td class="org-left">Text</td>
<td class="org-left">(0.5 1 Voltage over time)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org7e2ee1c" class="outline-2">
<h2 id="org7e2ee1c"><span class="section-number-2">6</span> Display image</h2>
<div class="outline-text-2" id="text-6">
<p>
Check your <a href="https://github.com/ardumont/org2jekyll/blob/master/testing-blog/_config.yml">_config.yml</a> to determine where to store images.
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/img/plot-sin.png" alt="plot-sin.png" />
</p>
</div>

<p>
source: <a href="https://matplotlib.org/gallery/lines_bars_and_markers/simple_plot.html">https://matplotlib.org/gallery/lines_bars_and_markers/simple_plot.html</a>
</p>
</div>
</div>
